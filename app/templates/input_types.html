<div class="form-group">
  {% if value.type is not defined or (value.type != "hidden" and value.type != "swift_upload" and value.type != "swift_token" and value.type != "swift_autouuid" )%}
  <label for="{{key}}">
    {% if value.display_name is defined %}
    {{value.display_name}}
    {% else %}
    {{key}}
    {% endif %}
  </label>
  {% endif %}
  {% if value.type is defined %}

    <!-- text type -->
    {% if value.type == "text" %}
      <input type="text" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" placeholder="{{value.placeholder}}" {% if value.required %}required{%endif%} />
    <!-- end select type -->

    <!-- hidden text type -->
    {% elif value.type == "hidden" %}
      <input type="hidden" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" >
    <!-- end hidden text type -->

    <!-- email type -->
    {% elif value.type == "email" %}
      <input type="email" class="form-control" id="{{key}}" name="{{key}}" placeholder="Enter your email" {% if value.required %}required{%endif%} >
    <!-- end email type -->

    <!-- password type -->
    {% elif value.type == "password" %}
      <input type="password" class="form-control" id="{{key}}" name="{{key}}" placeholder="Enter your password" {% if value.required %}required{%endif%} >
    <!-- end password type -->

    <!-- select type -->
    <!-- https://github.com/select2/select2/issues/4220 -->
    {% elif value.type == "select" %}
      <select class="js-example-basic-single js-states form-control" id="{{key}}" name="{{key}}">
      {% for constraint in value.constraints %}
        <option value="{{constraint['value']}}">{{constraint['label']}}</option>
      {% endfor %}
      </select>
    <!-- end select type -->

    <!-- radio type -->
    {% elif value.type == "radio" %}
      {% for constraint in value.constraints %}
        {% if loop.first %}
          <br><input type="radio" id="{{key}}" name="{{key}}" value={{constraint['value']}} checked> {{constraint['label']}}<br>
        {% else %}
          <input type="radio" id="{{key}}" name="{{key}}" value={{constraint['value']}}> {{constraint['label']}}<br>
        {% endif %}
      {% endfor %}
    <!-- end radio type -->

    <!-- toggle type -->
    {% elif value.type == "toggle" %}
      {% for constraint in value.constraints %}
      <div>
        <input type="checkbox" data-toggle="toggle" id="{{key}}" name="{{key}}" data-size="sm" data-offstyle="dark" value={{constraint['value']}}>
      </div>
      {% endfor %}
    <!-- end toggle type -->

    <!-- ssh special input field -->
    {% elif value.type == "ssh_pub_key_type" %}
      <input type="text" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" {% if ssh_pub_key is not none %}placeholder="{{value.placeholder}}"{% endif %} {% if ssh_pub_key is none %}required{% endif %} />
    <!-- end ssh special input type -->

    <!-- swift_upload special input field -->
    {% elif value.type == "swift_upload" %}
        <div class="custom-file">
          <input type="file" class="custom-file-input" id="{{key}}" name="{{key}}">
          <label class="custom-file-label" for="{{key}}">Choose file</label>
        </div>
    <!-- end swift_upload special input type -->

    <!-- swift_autouuid special input type -->
    {% elif value.type == "swift_autouuid" %}
      <input type="hidden" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" >
    <!-- end swift_autouuid special input type -->

    <!-- swift_token special input type -->
    {% elif value.type == "swift_token" %}
      <input type="hidden" class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" >
    <!-- end swift_token special input type -->

    {% else %}
      <input {% if 'password' in key %}type="password"{% else %}type="text"{% endif %} class="form-control" id="{{key}}" name="{{key}}" value="{{value.default}}" aria-describedby="help{{key}}" {% if value.required %}required{%endif%} />
    {% endif %}  <!-- end tag type existence if -->

  <span id="help{{key}}" class="text-muted">{{value.description}}</span>
  {% endif %}
</div>

<script>
  $('.custom-file-input').on('change', function() {
   let fileName = $(this).val().split('\\').pop();
   $(this).next('.custom-file-label').addClass("selected").html(fileName);
});

</script>